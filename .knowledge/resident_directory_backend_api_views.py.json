{"is_source_file": true, "format": "Python with Django REST Framework", "description": "This file defines API views, viewsets, permissions, and related logic for managing resident data and photos in a resident directory management system. It includes endpoints for CRUD operations, search, photo management, and user registration.", "external_files": ["django.contrib.auth.models.User", "django.db.models.Q", "rest_framework.viewsets", "rest_framework.permissions", "rest_framework.status", "rest_framework.decorators", "rest_framework.pagination.PageNumberPagination", "rest_framework.response.Response", "rest_framework.views.APIView", "./models", "./serializers"], "external_methods": ["User.objects.create_user", "Resident.objects.count", "Resident.objects.filter", "Photo.objects.count", "Photo.objects.filter", "Photo.objects.select_related", "Photo.objects.exclude", "PhotoSerializer", "Response", "status.HTTP_201_CREATED", "status.HTTP_204_NO_CONTENT"], "published": ["health", "ResidentViewSet", "PhotoViewSet", "register", "AdminSummaryView"], "classes": [{"name": "StandardResultsSetPagination", "description": "Provides default pagination settings for list endpoints."}, {"name": "ResidentPermissions", "description": "Custom permission class to control access to resident operations."}, {"name": "ResidentViewSet", "description": "CRUD operations for Resident model with search and nested photo route."}, {"name": "PhotoViewSet", "description": "Retrieve, delete, and set primary photo for residents."}, {"name": "AdminSummaryView", "description": "Provides a staff-only summary count of residents and photos."}], "methods": [{"name": "health(request)", "description": "Health check endpoint to verify server is running.", "scope": "", "scopeKind": ""}, {"name": "get_queryset(self)", "description": "Filters residents based on query parameters for search and filtering.", "scope": "ResidentViewSet", "scopeKind": "class"}, {"name": "photos(self, request, pk=None)", "description": "Nested route handler for getting or uploading photos for a resident.", "scope": "ResidentViewSet", "scopeKind": "class"}, {"name": "retrieve(self, request, pk=None)", "description": "Get a specific photo by ID.", "scope": "PhotoViewSet", "scopeKind": "class"}, {"name": "destroy(self, request, pk=None)", "description": "Delete a specific photo by ID.", "scope": "PhotoViewSet", "scopeKind": "class"}, {"name": "set_primary(self, request, pk=None)", "description": "Set a given photo as the primary photo for its resident.", "scope": "PhotoViewSet", "scopeKind": "class"}, {"name": "register(request)", "description": "Register a new user with username, password, and optional email.", "scope": "", "scopeKind": ""}, {"name": "get(self, request)", "description": "Retrieve method in AdminSummaryView providing counts of residents and photos.", "scope": "AdminSummaryView", "scopeKind": "class"}, {"name": "has_permission(self, request, view)", "scope": "ResidentPermissions", "scopeKind": "class", "description": "unavailable"}], "calls": ["User.objects.create_user", "Resident.objects.all", "Resident.objects.filter", "Photo.objects.count", "Photo.objects.filter", "Photo.objects.select_related", "Photo.objects.exclude", "PhotoSerializer", "self.get_object", "photo.delete", "photo.save", "Response", "status.HTTP_201_CREATED", "status.HTTP_204_NO_CONTENT"], "search-terms": ["resident", "photo", "viewset", "permissions", "pagination", "search", "photos", "set_primary", "register", "summary", "APIView"], "state": 2, "file_id": 10, "knowledge_revision": 49, "git_revision": "e5a1b7e8f91340ee2a76ab97e35fc11bd7beb8a2", "revision_history": [{"32": "8687cbf42a11aeaa134c35fdcc28a64e0f686708"}, {"42": "8687cbf42a11aeaa134c35fdcc28a64e0f686708"}, {"49": "e5a1b7e8f91340ee2a76ab97e35fc11bd7beb8a2"}], "ctags": [{"_type": "tag", "name": "AdminSummaryView", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class AdminSummaryView(APIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PhotoViewSet", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class PhotoViewSet(viewsets.GenericViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ResidentPermissions", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class ResidentPermissions(permissions.BasePermission):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ResidentViewSet", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class ResidentViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StandardResultsSetPagination", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class StandardResultsSetPagination(PageNumberPagination):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "destroy", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def destroy(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def get(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "AdminSummaryView", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "has_permission", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def has_permission(self, request, view):$/", "language": "Python", "kind": "member", "signature": "(self, request, view)", "scope": "ResidentPermissions", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "max_page_size", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    max_page_size = 100$/", "language": "Python", "kind": "variable", "scope": "StandardResultsSetPagination", "scopeKind": "class"}, {"_type": "tag", "name": "page_size", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    page_size = 10$/", "language": "Python", "kind": "variable", "scope": "StandardResultsSetPagination", "scopeKind": "class"}, {"_type": "tag", "name": "page_size_query_param", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    page_size_query_param = 'page_size'$/", "language": "Python", "kind": "variable", "scope": "StandardResultsSetPagination", "scopeKind": "class"}, {"_type": "tag", "name": "pagination_class", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    pagination_class = StandardResultsSetPagination$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    permission_classes = [ResidentPermissions]$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAdminUser]$/", "language": "Python", "kind": "variable", "scope": "AdminSummaryView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "photos", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def photos(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    queryset = Photo.objects.select_related('resident').all()$/", "language": "Python", "kind": "variable", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    queryset = Resident.objects.all().prefetch_related('photos')$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^def register(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "retrieve", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def retrieve(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    serializer_class = PhotoSerializer$/", "language": "Python", "kind": "variable", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    serializer_class = ResidentSerializer$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "set_primary", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def set_primary(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class"}], "hash": "1a734c710a1ef1e203edc97070aa2926", "format-version": 4, "code-base-name": "resident_directory_backend", "filename": "resident_directory_backend/api/views.py", "fields": [{"name": "max_page_size = 100", "scope": "StandardResultsSetPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "page_size = 10", "scope": "StandardResultsSetPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "page_size_query_param = 'page_size'", "scope": "StandardResultsSetPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "pagination_class = StandardResultsSetPagination", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [ResidentPermissions]", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.IsAdminUser]", "scope": "AdminSummaryView", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.IsAuthenticated]", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Photo.objects.select_related('resident').all()", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Resident.objects.all().prefetch_related('photos')", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = PhotoSerializer", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = ResidentSerializer", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}]}