{"is_source_file": true, "format": "Python", "description": "This file defines Django REST Framework view classes and functions for managing residents and photos, including CRUD operations, filtering, pagination, authentication, and user registration endpoints.", "external_files": ["django.contrib.auth.models", "django.db.models", "django.utils.decorators", "django.views.decorators.csrf", "rest_framework", "rest_framework_simplejwt.views", ".models", ".serializers"], "external_methods": ["User.objects.create_user", "Resident.objects.all", "Resident.objects.count", "Resident.objects.filter", "Photo.objects.count", "Photo.objects.filter", "Photo.objects.select_related", "Photo.objects.filter", "Photo.objects.update", "PhotoSerializer", "Response", "status", "Q", "Count"], "published": ["health", "register", "ResidentViewSet", "PhotoViewSet", "AdminSummaryView"], "classes": [{"name": "StandardResultsSetPagination", "description": "Custom pagination class for list endpoints with default page size of 10."}, {"name": "ResidentPermissions", "description": "Custom permission class that grants or restricts access to resident operations based on user roles."}, {"name": "ResidentViewSet", "description": "ViewSet providing CRUD operations, search, filtering, and nested photo management for Resident objects."}, {"name": "PhotoViewSet", "description": "ViewSet for retrieving, deleting, and setting primary photos."}, {"name": "AdminSummaryView", "description": "API view for admins to get summary counts of residents and photos."}], "methods": [{"name": "health(request)", "description": "Health check endpoint, returns server status message.", "scope": "", "scopeKind": ""}, {"name": "register(request)", "description": "User registration endpoint, creates a new user.", "scope": "", "scopeKind": ""}, {"name": "destroy(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "get(self, request)", "scope": "AdminSummaryView", "scopeKind": "class", "description": "unavailable"}, {"name": "get_queryset(self)", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "has_permission(self, request, view)", "scope": "ResidentPermissions", "scopeKind": "class", "description": "unavailable"}, {"name": "photos(self, request, pk=None)", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "retrieve(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "set_primary(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}], "calls": ["User.objects.create_user", "Resident.objects.all", "Resident.objects.count", "Resident.objects.filter", "Photo.objects.count", "Photo.objects.filter", "Photo.objects.select_related", "Photo.objects.filter", "Photo.objects.update", "serializer.is_valid", "serializer.save", "serializer.errors", "PhotoSerializer", "Response", "status.HTTP_201_CREATED", "status.HTTP_204_NO_CONTENT", "status.HTTP_400_BAD_REQUEST", "Q", "Count"], "search-terms": ["ResidentViewSet", "PhotoViewSet", "AdminSummaryView", "pagination", "permissions", "user registration", "photo management", "filtering", "nested route", "set_primary", "access control"], "state": 2, "file_id": 10, "knowledge_revision": 42, "git_revision": "8687cbf42a11aeaa134c35fdcc28a64e0f686708", "revision_history": [{"32": "8687cbf42a11aeaa134c35fdcc28a64e0f686708"}, {"42": "8687cbf42a11aeaa134c35fdcc28a64e0f686708"}], "ctags": [{"_type": "tag", "name": "AdminSummaryView", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class AdminSummaryView(APIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PhotoViewSet", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class PhotoViewSet(viewsets.GenericViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ResidentPermissions", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class ResidentPermissions(permissions.BasePermission):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ResidentViewSet", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class ResidentViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StandardResultsSetPagination", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^class StandardResultsSetPagination(PageNumberPagination):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "destroy", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def destroy(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def get(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "AdminSummaryView", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "has_permission", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def has_permission(self, request, view):$/", "language": "Python", "kind": "member", "signature": "(self, request, view)", "scope": "ResidentPermissions", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "max_page_size", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    max_page_size = 100$/", "language": "Python", "kind": "variable", "scope": "StandardResultsSetPagination", "scopeKind": "class"}, {"_type": "tag", "name": "page_size", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    page_size = 10$/", "language": "Python", "kind": "variable", "scope": "StandardResultsSetPagination", "scopeKind": "class"}, {"_type": "tag", "name": "page_size_query_param", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    page_size_query_param = 'page_size'$/", "language": "Python", "kind": "variable", "scope": "StandardResultsSetPagination", "scopeKind": "class"}, {"_type": "tag", "name": "pagination_class", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    pagination_class = StandardResultsSetPagination$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    permission_classes = [ResidentPermissions]$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAdminUser]$/", "language": "Python", "kind": "variable", "scope": "AdminSummaryView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "photos", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def photos(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    queryset = Photo.objects.select_related('resident').all()$/", "language": "Python", "kind": "variable", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    queryset = Resident.objects.all().prefetch_related('photos')$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^def register(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "retrieve", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def retrieve(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    serializer_class = PhotoSerializer$/", "language": "Python", "kind": "variable", "scope": "PhotoViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    serializer_class = ResidentSerializer$/", "language": "Python", "kind": "variable", "scope": "ResidentViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "set_primary", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/views.py", "pattern": "/^    def set_primary(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "PhotoViewSet", "scopeKind": "class"}], "hash": "6dd227387c17018cd3ad1a75a9dc9264", "format-version": 4, "code-base-name": "resident_directory_backend", "filename": "resident_directory_backend/api/views.py", "fields": [{"name": "max_page_size = 100", "scope": "StandardResultsSetPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "page_size = 10", "scope": "StandardResultsSetPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "page_size_query_param = 'page_size'", "scope": "StandardResultsSetPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "pagination_class = StandardResultsSetPagination", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [ResidentPermissions]", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.IsAdminUser]", "scope": "AdminSummaryView", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.IsAuthenticated]", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Photo.objects.select_related('resident').all()", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Resident.objects.all().prefetch_related('photos')", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = PhotoSerializer", "scope": "PhotoViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = ResidentSerializer", "scope": "ResidentViewSet", "scopeKind": "class", "description": "unavailable"}]}