{"is_source_file": true, "format": "Python (Django Models)", "description": "This file defines Django ORM models for managing residents and their associated photos in a resident directory management system. It includes classes for residents, photos, and an abstract timestamped base model, along with a helper function for photo upload paths.", "external_files": ["django.db.models"], "external_methods": ["models.CharField", "models.EmailField", "models.DateField", "models.TextField", "models.BooleanField", "models.Index", "models.ForeignKey", "models.ImageField"], "published": ["resident_photo_upload_path"], "classes": [{"name": "TimeStampedModel", "description": "Abstract base model providing created_at and updated_at timestamp fields for inheritance.", "methods": [{"name": "__str__", "description": "Returns a string representation of the resident, typically not in this class but inherited."}]}, {"name": "Resident", "description": "Model representing a resident with personal and contact information, including ordering and indexing metadata.", "methods": [{"name": "__str__", "description": "Returns the resident's full name and apartment for display."}, {"name": "primary_photo", "description": "Property that returns the resident's primary photo, if available."}]}, {"name": "Photo", "description": "Model representing a photo associated with a resident, with primary flag and automatic primary photo management.", "methods": [{"name": "save", "description": "Overrides save to ensure only one primary photo per resident."}, {"name": "__str__", "description": "String representation indicating the resident and whether the photo is primary."}]}], "methods": [{"name": "str resident_photo_upload_path(instance: \"Photo\", filename: str)", "description": "Generates a dynamic file path for uploading resident photos based on the year and month.", "scope": "", "scopeKind": ""}, {"name": "str __str__(self)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "primary_photo(self)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "save(self, *args, **kwargs)", "scope": "Photo", "scopeKind": "class", "description": "unavailable"}], "calls": ["super().save", "Photo.objects.filter", "Photo.objects.update"], "search-terms": ["TimeStampedModel", "resident_photo_upload_path", "Photo", "Resident", "primary_photo"], "state": 2, "file_id": 17, "knowledge_revision": 39, "git_revision": "8687cbf42a11aeaa134c35fdcc28a64e0f686708", "revision_history": [{"37": "8687cbf42a11aeaa134c35fdcc28a64e0f686708"}, {"39": "8687cbf42a11aeaa134c35fdcc28a64e0f686708"}], "ctags": [{"_type": "tag", "name": "Meta", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    class Meta:$/", "language": "Python", "kind": "class", "scope": "Photo", "scopeKind": "class"}, {"_type": "tag", "name": "Meta", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    class Meta:$/", "language": "Python", "kind": "class", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "Meta", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    class Meta:$/", "language": "Python", "kind": "class", "scope": "TimeStampedModel", "scopeKind": "class"}, {"_type": "tag", "name": "Photo", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^class Photo(models.Model):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Resident", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^class Resident(TimeStampedModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TimeStampedModel", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^class TimeStampedModel(models.Model):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__str__", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    def __str__(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "Photo", "scopeKind": "class"}, {"_type": "tag", "name": "__str__", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    def __str__(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "abstract", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^        abstract = True$/", "language": "Python", "kind": "variable", "scope": "TimeStampedModel.Meta", "scopeKind": "class"}, {"_type": "tag", "name": "apartment", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    apartment = models.CharField(max_length=50)$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    created_at = models.DateTimeField(auto_now_add=True, help_text=\"Creation timestamp\")$/", "language": "Python", "kind": "variable", "scope": "TimeStampedModel", "scopeKind": "class"}, {"_type": "tag", "name": "dob", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    dob = models.DateField(null=True, blank=True)$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    email = models.EmailField(max_length=254, unique=False)$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "first_name", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    first_name = models.CharField(max_length=120)$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "image", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    image = models.ImageField(upload_to=\"residents\\/%Y\\/%m\\/\")$/", "language": "Python", "kind": "variable", "scope": "Photo", "scopeKind": "class"}, {"_type": "tag", "name": "indexes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^        indexes = [$/", "language": "Python", "kind": "variable", "scope": "Resident.Meta", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    is_active = models.BooleanField(default=True)$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "is_primary", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    is_primary = models.BooleanField(default=False)$/", "language": "Python", "kind": "variable", "scope": "Photo", "scopeKind": "class"}, {"_type": "tag", "name": "last_name", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    last_name = models.CharField(max_length=120)$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    notes = models.TextField(blank=True, default=\"\")$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "ordering", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^        ordering = [\"-uploaded_at\"]$/", "language": "Python", "kind": "variable", "scope": "Photo.Meta", "scopeKind": "class"}, {"_type": "tag", "name": "ordering", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^        ordering = [\"last_name\", \"first_name\"]$/", "language": "Python", "kind": "variable", "scope": "Resident.Meta", "scopeKind": "class"}, {"_type": "tag", "name": "phone", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    phone = models.CharField(max_length=50)$/", "language": "Python", "kind": "variable", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "primary_photo", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    def primary_photo(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Resident", "scopeKind": "class"}, {"_type": "tag", "name": "resident", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    resident = models.ForeignKey(Resident, related_name=\"photos\", on_delete=models.CASCADE)$/", "language": "Python", "kind": "variable", "scope": "Photo", "scopeKind": "class"}, {"_type": "tag", "name": "resident_photo_upload_path", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^def resident_photo_upload_path(instance: \"Photo\", filename: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(instance: \"Photo\", filename: str)"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    def save(self, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, *args, **kwargs)", "scope": "Photo", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    updated_at = models.DateTimeField(auto_now=True, help_text=\"Last update timestamp\")$/", "language": "Python", "kind": "variable", "scope": "TimeStampedModel", "scopeKind": "class"}, {"_type": "tag", "name": "uploaded_at", "path": "/home/kavia/workspace/code-generation/resident-directory-management-system-222579-222588/resident_directory_backend/api/models.py", "pattern": "/^    uploaded_at = models.DateTimeField(auto_now_add=True)$/", "language": "Python", "kind": "variable", "scope": "Photo", "scopeKind": "class"}], "hash": "da457881a2c7363f03b9d619b74e7578", "format-version": 4, "code-base-name": "resident_directory_backend", "filename": "resident_directory_backend/api/models.py", "fields": [{"name": "abstract = True", "scope": "TimeStampedModel.Meta", "scopeKind": "class", "description": "unavailable"}, {"name": "apartment = models.CharField(max_length=50)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = models.DateTimeField(auto_now_add=True, help_text=\"Creation timestamp\")", "scope": "TimeStampedModel", "scopeKind": "class", "description": "unavailable"}, {"name": "dob = models.DateField(null=True, blank=True)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "email = models.EmailField(max_length=254, unique=False)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "first_name = models.CharField(max_length=120)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "image = models.ImageField(upload_to=\"residents\\/%Y\\/%m\\/\")", "scope": "Photo", "scopeKind": "class", "description": "unavailable"}, {"name": "indexes = [", "scope": "Resident.Meta", "scopeKind": "class", "description": "unavailable"}, {"name": "is_active = models.BooleanField(default=True)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "is_primary = models.BooleanField(default=False)", "scope": "Photo", "scopeKind": "class", "description": "unavailable"}, {"name": "last_name = models.CharField(max_length=120)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "notes = models.TextField(blank=True, default=\"\")", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "ordering = [\"-uploaded_at\"]", "scope": "Photo.Meta", "scopeKind": "class", "description": "unavailable"}, {"name": "ordering = [\"last_name\", \"first_name\"]", "scope": "Resident.Meta", "scopeKind": "class", "description": "unavailable"}, {"name": "phone = models.CharField(max_length=50)", "scope": "Resident", "scopeKind": "class", "description": "unavailable"}, {"name": "resident = models.ForeignKey(Resident, related_name=\"photos\", on_delete=models.CASCADE)", "scope": "Photo", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = models.DateTimeField(auto_now=True, help_text=\"Last update timestamp\")", "scope": "TimeStampedModel", "scopeKind": "class", "description": "unavailable"}, {"name": "uploaded_at = models.DateTimeField(auto_now_add=True)", "scope": "Photo", "scopeKind": "class", "description": "unavailable"}]}